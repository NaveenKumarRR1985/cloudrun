FROM python:3.12-slim-bullseye

ARG ZIP_FILE=DynatraceLatestInstall.zip
RUN mkdir -p /image
COPY ${ZIP_FILE} /image/oneagent.zip

# stage name used in the fixed preload path
ENV DT_STAGE=nonprod
# health endpoint config
ENV HEALTH_PORT=8082
ENV HEALTH_PATH=/healthz

COPY entrypoint.sh /entrypoint.sh
RUN chmod +x /entrypoint.sh

USER 0
ENTRYPOINT ["/entrypoint.sh"]
