{% extends "base.html" %}

{% block content %}
<div class="glass-card p-8">
    <h1 class="text-4xl font-bold text-white mb-8 text-center">ðŸ“ˆ Analytics Dashboard</h1>
    
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
        <div class="bg-white bg-opacity-90 rounded-lg p-6">
            <h3 class="text-xl font-bold text-gray-800 mb-4">Real-time Metrics</h3>
            <canvas id="metricsChart" width="400" height="200"></canvas>
        </div>
        
        <div class="bg-white bg-opacity-90 rounded-lg p-6">
            <h3 class="text-xl font-bold text-gray-800 mb-4">System Status</h3>
            <div class="space-y-4">
                <div class="flex justify-between items-center">
                    <span class="text-gray-600">CPU Usage</span>
                    <div class="flex items-center">
                        <div class="w-32 bg-gray-200 rounded-full h-2 mr-2">
                            <div id="cpuBar" class="bg-blue-600 h-2 rounded-full" style="width: 45%"></div>
                        </div>
                        <span id="cpuText" class="text-sm text-gray-800">45%</span>
                    </div>
                </div>
                <div class="flex justify-between items-center">
                    <span class="text-gray-600">Memory Usage</span>
                    <div class="flex items-center">
                        <div class="w-32 bg-gray-200 rounded-full h-2 mr-2">
                            <div id="memoryBar" class="bg-green-600 h-2 rounded-full" style="width: 60%"></div>
                        </div>
                        <span id="memoryText" class="text-sm text-gray-800">60%</span>
                    </div>
                </div>
                <div class="flex justify-between items-center">
                    <span class="text-gray-600">Disk Usage</span>
                    <div class="flex items-center">
                        <div class="w-32 bg-gray-200 rounded-full h-2 mr-2">
                            <div id="diskBar" class="bg-orange-600 h-2 rounded-full" style="width: 30%"></div>
                        </div>
                        <span id="diskText" class="text-sm text-gray-800">30%</span>
                    </div>
                </div>
                <div class="flex justify-between items-center">
                    <span class="text-gray-600">Network I/O</span>
                    <div class="flex items-center">
                        <div class="w-32 bg-gray-200 rounded-full h-2 mr-2">
                            <div id="networkBar" class="bg-purple-600 h-2 rounded-full" style="width: 25%"></div>
                        </div>
                        <span id="networkText" class="text-sm text-gray-800">25%</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-8">
        <div class="metric-card text-center">
            <div class="text-3xl mb-2">ðŸ”¥</div>
            <div class="text-2xl font-bold text-red-600" id="errorCount">0</div>
            <div class="text-gray-600">Errors (24h)</div>
        </div>
        <div class="metric-card text-center">
            <div class="text-3xl mb-2">âš¡</div>
            <div class="text-2xl font-bold text-yellow-600" id="responseTime">245ms</div>
            <div class="text-gray-600">Avg Response</div>
        </div>
        <div class="metric-card text-center">
            <div class="text-3xl mb-2">ðŸš€</div>
            <div class="text-2xl font-bold text-blue-600" id="throughput">127</div>
            <div class="text-gray-600">Req/min</div>
        </div>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
<script>
    // Initialize metrics chart
    const ctx = document.getElementById('metricsChart').getContext('2d');
    const chart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: Array.from({length: 10}, (_, i) => `${9-i}m ago`),
            datasets: [{
                label: 'Response Time (ms)',
                data: Array.from({length: 10}, () => Math.floor(Math.random() * 200) + 100),
                borderColor: 'rgb(75, 192, 192)',
                backgroundColor: 'rgba(75, 192, 192, 0.2)',
                tension: 0.4
            }, {
                label: 'Request Count',
                data: Array.from({length: 10}, () => Math.floor(Math.random() * 50) + 10),
                borderColor: 'rgb(255, 99, 132)',
                backgroundColor: 'rgba(255, 99, 132, 0.2)',
                tension: 0.4
            }]
        },
        options: {
            responsive: true,
            plugins: {
                title: {
                    display: true,
                    text: 'Application Performance Metrics'
                }
            },
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });
    
    function updateMetrics() {
        // Update system bars
        const cpu = Math.random() * 80 + 10;
        const memory = Math.random() * 70 + 20;
        const disk = Math.random() * 50 + 10;
        const network = Math.random() * 60 + 10;
        
        document.getElementById('cpuBar').style.width = cpu + '%';
        document.getElementById('cpuText').textContent = Math.round(cpu) + '%';
        
        document.getElementById('memoryBar').style.width = memory + '%';
        document.getElementById('memoryText').textContent = Math.round(memory) + '%';
        
        document.getElementById('diskBar').style.width = disk + '%';
        document.getElementById('diskText').textContent = Math.round(disk) + '%';
        
        document.getElementById('networkBar').style.width = network + '%';
        document.getElementById('networkText').textContent = Math.round(network) + '%';
        
        // Update metric cards
        document.getElementById('errorCount').textContent = Math.floor(Math.random() * 10);
        document.getElementById('responseTime').textContent = Math.floor(Math.random() * 200) + 100 + 'ms';
        document.getElementById('throughput').textContent = Math.floor(Math.random() * 100) + 50;
        
        // Update chart
        chart.data.datasets[0].data.shift();
        chart.data.datasets[0].data.push(Math.floor(Math.random() * 200) + 100);
        chart.data.datasets[1].data.shift();
        chart.data.datasets[1].data.push(Math.floor(Math.random() * 50) + 10);
        chart.update('none');
    }
    
    // Update metrics every 3 seconds
    setInterval(updateMetrics, 3000);
    updateMetrics();
</script>
{% endblock %}