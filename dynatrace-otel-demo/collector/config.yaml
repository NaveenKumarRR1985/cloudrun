receivers:
  otlp:
    protocols:
      grpc: { endpoint: 0.0.0.0:5517 }
      http: { endpoint: 0.0.0.0:5518 }

processors:
  memory_limiter:
    check_interval: 1s
    limit_mib: 256
  batch:
    timeout: 1s
    send_batch_size: 1024
    send_batch_max_size: 2048

exporters:
  logging:    { verbosity: detailed }
  prometheus: { endpoint: 0.0.0.0:8889, namespace: otel_demo }

extensions:
  health_check: { endpoint: 0.0.0.0:13133 }
  pprof:        { endpoint: 0.0.0.0:1777 }
  zpages:       { endpoint: 0.0.0.0:55679 }

service:
  extensions: [health_check, pprof, zpages]
  pipelines:
    traces:  { receivers: [otlp], processors: [memory_limiter, batch], exporters: [logging] }
    metrics: { receivers: [otlp], processors: [memory_limiter, batch], exporters: [logging, prometheus] }
    logs:    { receivers: [otlp], processors: [memory_limiter, batch], exporters: [logging] }
